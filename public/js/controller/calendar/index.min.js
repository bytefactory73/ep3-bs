(function(){function e(a){var i=$("#calendar-squarebox-template");i.length?n(i.html()):n('<div class="padded">...</p>'),d.clearQueue().delay(h).queue(function(){$.ajax({cache:!1,data:{ajax:!0},dataType:"html",error:function(){d&&!f&&(window.location.href=a)},success:function(a){d&&!f&&(n(a),d.find(".no-ajax").remove(),d.find(".datepicker").datepicker(),d.find(".inline-label-container").each(function(){updateInlineLabel($(this))}),d.append('<a href="#" class="squarebox-primary-close-link squarebox-close-link">&times;</a>'),t(),d.on("click","a.squarebox-internal-link",function(a){a.preventDefault(),e($(this).attr("href"))}),d.on("click","a.squarebox-close-link",function(e){e.preventDefault(),o()}))},url:a}),$(this).dequeue()})}function a(){s||(s=$('<div id="squarebox-overlay"></div>').css({position:"absolute","z-index":1532,opacity:0,width:$(document).width(),height:$(document).height(),left:0,top:0,background:"#333"}),$("body").prepend(s)),d||(d=$('<div class="panel"></div>').css({position:"absolute","z-index":1536}),$("body").prepend(d))}function n(e){a(),d.clearQueue(),d.css("opacity",.01),d.html(e),t(),d.fadeTo(p,1),i()}function t(){var e;d&&(e=$("body").height()>$(window).height()?window:u,d.position({my:"center",at:"center",of:e}))}function o(){d&&(f=!0,d.clearQueue().fadeOut(p,function(){d&&(d.remove(),d=void 0),f=!1}),c())}function i(){s&&s.clearQueue().fadeTo(p,.75)}function c(){s&&s.clearQueue().fadeTo(p,0,function(){s&&(s.remove(),s=void 0)})}function r(){var e=$("#calendar").width(),a=$(".calendar-time-col, .calendar-square-col").width(),n=$(".calendar-date-col:visible");e&&a&&n.length&&n.width(Math.floor((e-a)/n.length))}function l(){0}var u,d,s,f=!1,h=300,p=350;$(document).ready(function(){u=$(".calendar-table"),u.on("click","a.calendar-cell",function(a){var n=$(this);n.hasClass("squarebox-external-link")||(a.preventDefault(),d||(a.stopPropagation(),e(n.attr("href"))))}),$(window).resize(t),$(window).on("squarebox.update",t),$("body").on("click","#squarebox-overlay",function(){o()}),$("a.calendar-cell").hover(function(){var e=$(this),a=e.attr("class"),n=a.match(/cc-group-\d+/);if(n){var t=$("a."+n);t.each(function(){$(this).data("original-style",$(this).attr("style"))}),t.css({opacity:.9,"background-color":e.css("background-color")}),e.css("opacity",1)}},function(){var e=$(this),a=e.attr("class"),n=a.match(/cc-group-\d+/);if(n){var t=$("a."+n);t.each(function(){$(this).attr("style",$(this).data("original-style"))})}}),r(),$(window).resize(r),$(document).on("updateLayout",r),l(),$(window).resize(l),$(document).on("updateLayout",l)})})();